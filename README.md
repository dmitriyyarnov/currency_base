# USD Scraper

Проект для **сбора, хранения, анализа и предоставления курса USD с сайта ЦБ РФ**.  

---

## **Что делает проект**

1. **Сбор данных (скрапинг)**  
   - `scraper/scraper.py` получает текущий курс USD с сайта ЦБ РФ.  
   - Сохраняет данные в JSON-файл в папке `data/` (например: `data/2025-09-22.json`).  

2. **Автоматизация через Prefect**  
   - `flow/usd_flow.py` запускает скрапер автоматически.  

3. **API для доступа к данным**  
   - `api/api.py` предоставляет REST API `/rates`.  
   - Параметры:  
     - `limit` – количество записей (по умолчанию 10, максимум 100)  
     - `sort` – сортировка по дате (`asc` или `desc`)  

4. **Анализ и визуализация**  
   - `analysis/plot.py` строит график динамики курса USD с помощью **matplotlib**.  
   - График отображается в отдельном окне matplotlib.  

---

### 1. Установка зависимостей
Открой **Terminal** в PyCharm и выполни:

pip install -r requirements.txt

### 2. Сбор первого курса USD

В панели проекта открой `scraper/scraper.py`.

Нажми **Run**.

В папке `data/` появится JSON-файл с текущим курсом USD.

Альтернатива через терминал:

python scraper/scraper.py

### 3. Автоматический запуск через Prefect

В панели проекта открой `flow/usd_flow.py`.

Нажми **Run** – flow вызывает скрапер и сохраняет данные в `data/`.

Альтернатива через терминал:

python flow/usd_flow.py

### 4. Запуск API

В панели проекта открой `api/api.py`.

В Terminal PyCharm запусти:

uvicorn api.api:app --reload

# Эндпоинт:
http://127.0.0.1:8000/rates?limit=5&sort=desc

# Пример ответа: 
[
  {"date": "2025-09-22", "rate": 93.45},
  {"date": "2025-09-21", "rate": 93.10}
]


### 5. Построение графика

В панели проекта открой `analysis/plot.py`.

Нажми **Run** – график динамики курса USD откроется в отдельном окне matplotlib.

Альтернатива через терминал:

Python analysis/plot.py


