# USD Scraper
Проект для **сбора, хранения, анализа и предоставления курса USD с сайта ЦБ РФ**.
## **Что делает проект**
1. **Сбор данных (скрапинг)**  
   - `scraper/scraper.py` получает текущий курс USD с сайта ЦБ РФ.  
   - Сохраняет данные в JSON-файл в папке `data/` (например: `data/2025-09-22.json`).  

2. **Автоматизация через Prefect**  
   - `flow/usd_flow.py` запускает скрапер автоматически.

3. **Анализ и визуализация**
   -  analysis/plot.py строит график динамики курса USD с помощью matplotlib.
   -  График отображается в отдельном окне matplotlib.

### Установка зависимостей

pip install -r requirements.txt

### Сбор первого курса USD

python scraper/scraper.py

### Автоматический запуск

Flow будет запускаться каждый день в указанное время. В скрипте время задано так: schedule.every().day.at("00:00").do(run_flow)

Запуск скрипта: python usd_scraper_flow.py

Скрипт должен работать постоянно, чтобы расписание выполнялось.

### Построение графика

python analysis/plot.py график динамики курса USD откроется в отдельном окне matplotlib.

### Запуск API

API для получения исторических данных о курсах валют (USD) из локальных JSON-файлов. API реализован на FastAPI и автоматически генерирует документацию в Swagger UI (/docs).

Запустить сервер: uvicorn app.main:app --reload
API будет доступен по адресу: http://127.0.0.1:8000

Эндпоинт  http://127.0.0.1:8000/rates Возвращает список курсов USD из файлов data/.
Параметры:
limit (int, 1–100, по умолчанию 10) — количество последних файлов
sort (string, asc/desc, по умолчанию desc) — порядок сортировки
Пример запроса: GET http://127.0.0.1:8000/rates?limit=5&sort=desc

Swagger UI: http://127.0.0.1:8000/docs



